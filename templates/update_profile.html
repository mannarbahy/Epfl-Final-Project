<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/update_profile.css">
    <link rel="stylesheet" href="../static/css/styles.css">
    <link rel="stylesheet" href="../static/css/nav.css">
   
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <title>Update Profile</title>
</head>
<body style="background-color: #FFE5B4; ">


      
 <section  class="container" style="background-color: #FFE5B4;">

 
  
    <header class="header">
        <nav class="navbar">
            <a href="" class="logo">
                <img src="../static/images/logobrand.png" alt="Logo" width="60px" height="50px" style="margin: 5 30; border-radius: 30px;">            </a>
    
            <div class="sidebar">
                <a href="#home" class="nav-link" onclick="hideSidebar() ">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed" >
                        <path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>
                    </svg>
                </a>
                <a href="/home" class="nav-link">HOME</a>
                <a href="/About_us" class="nav-link">ABOUT US</a>
                <a href="/shop" class="nav-link">Menu</a>
                <a href="/recipes" class="nav-link">Recipes</a>
                <a href="{{ url_for('signup') }}" class="nav-link">Sign Up</a>
                <a href="{{ url_for('profile') }}" class="nav-link">Profile</a>
                <a href="{{ url_for('logout') }}"  id="logout-btn" class="nav-link">Logout</a>
              
            </div>
    
            <div class="showmenu">
                <a href="#" class="showmenu" onclick="showSidebar()">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed" style="margin: 0 40px ;">
                        <path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"/>
                    </svg>
                </a>
            </div>
    
           <ul class="menu">
        <li><a href="/home">Home</a></li>
        <li><a href="/shop">Menu</a></li>
        <li><a href="/wishlist">Favorite</a></li>
        
        <li class="nav-user-dropdown">
            <a href="#" class="dropbtn">Food & Stories â–¼</a>
            <ul class="dropdown-content">
                <li><a href="/recipes">Recipes</a></li>
                <li><a href="/About_us">About Us</a></li>
            </ul>
        </li>
    </ul>
            <div class="nav-btns">
                <a href="{{ url_for('wishlist') }}" class="nav-search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <title>121 heart</title>
                        <g id="_01_align_center" data-name="01 align center">
                            <path d="M17.5.917a6.4,6.4,0,0,0-5.5,3.3A6.4,6.4,0,0,0,6.5.917,6.8,6.8,0,0,0,0,7.967c0,6.775,10.956,14.6,11.422,14.932l.578.409.578-.409C13.044,22.569,24,14.742,24,7.967A6.8,6.8,0,0,0,17.5.917ZM12,20.846c-3.253-2.43-10-8.4-10-12.879a4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,11,7.967h2a4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,22,7.967C22,12.448,15.253,18.416,12,20.846Z"/>
                        </g>
                    </svg>
                </a>
                <a href="{{ url_for('cart') }}" class="nav-cart">
                    <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
                        <title>109 shopping bag</title>
                        <g id="_01_align_center" data-name="01 align center">
                            <path d="M18,6A6,6,0,0,0,6,6H0V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V6ZM12,2a4,4,0,0,1,4,4H8A4,4,0,0,1,12,2ZM22,21a1,1,0,0,1-1,1H3a1,1,0,0,1-1-1V8H6v2H8V8h8v2h2V8h4Z"/>
                        </g>
                    </svg>
                </a>
                <div class="nav-user-dropdown">
                    <a href="#" class="nav-user">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                            <path d="M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464H398.7c-8.9-63.3-63.3-112-129-112H178.3c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3z"/>
                        </svg>
                    </a>
                    <div class="dropdown-content">
                      <a href="{{ url_for('signup') }}">Sign Up</a>
                      <a href="{{ url_for('profile') }}">Profile</a>
                      <a href="{{ url_for('logout') }}"  id="logout-btn">Logout</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
  
  
    
  </section>
    <div class="profilesection">
        <div class="profile">
            <h1>Update Profile</h1>
            <form id="updateProfileForm">
                
                <input type="text" id="name" name="name" class="input-field" placeholder="Enter your name"><br><br>

                
                <input type="email" id="email" name="email" class="input-field" placeholder="Enter your email"  ><br><br>

               
                <input type="text" id="address" name="address" class="input-field" placeholder="Enter your address" ><br><br>

              
                <input type="text" id="phone" name="phone" class="input-field" placeholder="Enter your phone number" ><br><br>

                <button type="submit" class="button">Update Profile</button>
            </form>
            <p>
                <a href="{{ url_for('profile') }}" class="button">Back to Profile</a>
            </p>
        </div>
    </div>

    <script>
        document.getElementById("updateProfileForm").addEventListener("submit", async function(event) {
            event.preventDefault();
    
           
            let oldData = JSON.parse(localStorage.getItem('user')) || {};
    
           
            let newData = {
                name: document.getElementById("name").value || oldData.name,
                email: document.getElementById("email").value || oldData.email,
                address: document.getElementById("address").value || oldData.address,
                phone: document.getElementById("phone").value || oldData.phone
            };
    
            const response = await fetch('/update_profile', {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(newData)
            });
    
            const result = await response.json();
            alert(result.message);
    
            if (result.success) {
                localStorage.setItem('user', JSON.stringify(newData));
                window.location.href = "/profile";
            }
        });
    </script>
    
</body>
</html>
